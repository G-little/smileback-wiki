# 交往自定义消息

[TOC]
## 修订记录
----
日期 | 作者 | 修订类型 | 修订内容 | 版本|
---- | ---- | ---- | ---- | ---- |
2020年07月10日|冷立纲|A|新增设计方案|1.0|

> 【修订类型：A-新增  M-修改 D-删除】

## 背景

自定义消息格式文档

## 产品说明

满足产品自定义展示消息

## 关键账户说明


| 用户ID | 身份  |
|:----:|:---:|
| 9999 | 通知 |
| 9998 | 用户通知 |
| 9997 | 官方小二 |



## 接口说明

自定义协议格式说明

``` json

		{
    "SyncOtherMachine": 1, //消息同步至发送方
    "From_Account": "10001",
    "To_Account": "10002",
    "MsgRandom": 1287657,
    "MsgTimeStamp": 5454457,
    "MsgBody": [
        {
            "MsgType": "TIMCustomElem", //自定义消息类型
            "MsgContent": {    
				     "type": 1,  //协议号 依次递增  具体格式参见下面协议定义
				     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别		  
				     "tips":"消息会话列表显示提示",
				     "createTime": 1233434343l, //创建时间戳
				     "msg":{                    //消息体
				      "title":"标题", //标题
				      "url":"http://kistalk.com", // h5 广告页面
				      "content":"这是消息内容",
				      "imageUrl":"头图地址", //相对地址，自行追加
				      "coverWidth":300,  //高度
				      "coverHeight":400   //宽度
				      }
            }
        }
    ]
}
		
```




### 1) 文本消息

#### 接口说明

| Type          | 1             |
|:------------- |:-------------:|
| 版本号      |  1.0 |



####  协议说明


```json

      {    
			     "type": 1,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //文本消息
			         "text":'xxxx'
			      }
        }


```






### 300 ) 红包通知

#### 接口说明

| Type          | 300            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 用户 |



####  协议说明


```json

      {    
			     "type": 300,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //红包通知
			         "talkId":123456, //房间ID
			         "user":{   //发送人信息
			             "uid":123, //用户ID
			             "avatar":"/b", //用户头像
			             "name":"b", //昵称
			             "certStatus":0, //头像认证状态 0 初始 1 认证
			             "verifyStatus":0, //实名认证状态 0 初始 1 认证
			             "creditLevel":1 //信用等级
			         },
			        
			        toUid:123, //被打赏人
			        toName:"xxx", //被打赏人姓名
			        content:"附言", //附言
			        money:12.33 //价格
			      }
        }


```


### 301 ) 点赞通知

#### 接口说明

| Type          | 301            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 用户 |



####  协议说明


```json

      {    
			     "type": 301,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "talkId":123456, //房间ID
			         "uid": 123, //用户ID
			         "toUid": 123, //被点赞用户ID
			         "value": true, // 点赞值  true: 点赞  false: 取消
			         "thumbCount": 123 //点赞数
			         "time":12345678  //发生时间
			      }
        }


```

### 302 ) 会话状态通知

#### 接口说明

| Type          | 302            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 用户 |



####  协议说明


```json

      {    
			     "type": 302,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "talkId":123456, //房间ID
			         "status": 1, //状态 1 开始  -1 结束
			      }
        }


```

### 303 ) 酬金状态通知

#### 接口说明

| Type          | 303            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 用户 |



####  协议说明


```json

      {    
			     "type": 303,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "talkId":123456, //房间ID
			         "uid":22, //指定用户
			         "value": true, // true: 获得  false:  取消
			      }
        }


```


### 351 ) 邀请卡片消息

#### 接口说明

| Type          | 351            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 9997 |



####  协议说明


```json

      {    
			     "type": 351,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "talkId":123456, //会话ID
			         "fromUid":22 //来源用户
			      }
        }


```



### 352 ) 邀请消息

#### 接口说明

| Type          | 352            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 用户 |



####  协议说明


```json

      {    
			     "type": 352,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "talkId":123456, //会话ID
			         "title":"标题", // 标题
			         "contentType": 0, //内容类型 0 图片 1 视频")
			         "content": "xxx", //内容
			         "coverSize": "x*y", //封面尺寸
			         "coverUrl": "/xxx", //封面
			         "money":3333, //酬金
			         "talkType":1 // 话题类型 0 问问 1 沙龙
			      }
        }


```

### 401 ) 关注消息

#### 接口说明

| Type          | 401            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 9998 |



####  协议说明


```json

      {    
			     "type": 401,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "fromUid":123456, //来源用户
			         "name":"昵称", // 昵称
			         "avatar":"头像" //头像
			         			      
			     }
      }


```


### 402 ) 点赞消息

#### 接口说明

| Type          | 402            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 9998 |



####  协议说明


```json

      {    
			     "type": 402,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "fromUid":123456, //来源用户
			         "name":"昵称", // 昵称
			         "avatar":"头像" //头像
			         
			     }
        }


```

### 403 ) 评论消息

#### 接口说明

| Type          | 403            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 9998 |



####  协议说明


```json

      {    
			     "type": 403,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "fromUid":123456, //来源用户
			         "name":"昵称", // 昵称
			         "avatar":"头像", //头像
			         "comment":"test" //点评
			      }
       }


```



### 500 ) 小助手消息

#### 接口说明

| Type          | 500            |
|:------------- |:-------------:|
| 版本号      |  1.0 |
| 来源账号      | 10000 |



####  协议说明


```json

      {    
			     "type": 500,  //协议号 依次递增  具体格式参见下面协议定义
			     "version":"1.0", //协议版本号，本地配置目前能处理的版本号，高于该版本则提示需要升级识别	  
			     "tips":"消息会话列表显示提示",
			     "createTime": 1233434343l, //创建时间戳
			     "msg":{                    //点赞通知
			         "title":'xxx', //标题
			         "comment":"描述", // 昵称
			         "urlType":"app",  //跳转类型 app/h5
			         "url":"跳转地址", //头像
			         "type": 101 // 消息类型， 101:认证消息  
			         "ext":{
			             
			         } //扩展参数
			      }
       }


```